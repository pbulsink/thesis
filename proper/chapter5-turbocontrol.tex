%======================================================================
\chapter{TurboControl}\label{chap.turbocontrol}
\markright{TurboControl}
%======================================================================

Elucidation of the mechanism using computational methods required a significant amount of manual set-up and analysis work of computational input and output files. The calculations required hundreds different molecules, intermediates, or transition state candidates to be calculated in multiple different environments, with the final mechanism employing 38 species in gas and solvated systems. These calculations typically require analyst intervention or set-up of intermediate steps to be able to fully elucidate all of the required information. For example, frequency calculations must be set up after a geometry optimization to ensure ground state or transition state geometries. 

Additionally, while TurboMole contains much faster optimization code for \gls{ac.dft} calculations, the user interface is exceptionally user-unfriendly and involves an abrasive interactive text prompt environment. This contrasts to Gaussian~09, which is significantly more popular, particularly due to the user-friendliness of the GaussView \gls{ac.gui}, despite concerns about the speed of optimization of large or complex molecules.

These two factors prompted the development of a new program, TurboControl, written in Python, with the goal of combining the user friendliness of GaussView on top of the optimization efficiency of TurboMole. This program allows a user to prepare the input files in GaussView, modify them slightly in any text editor available to them, then run a batch calculation on the files. TurboControl monitors the computational jobs, resubmitting for frequency calculations when optimization is complete if requested, and using the TurboMole tools available when required to ensure ground state or first transition state geometries are discovered. TurboControl then creates a single output file, providing the energy and first frequency vibration of each molecule. Additional commands can instruct TurboControl to run molecules in a simulated solution, do single-point energy calculations, or gather more in-depth thermodynamic information from the outputs using TurboMole's tools. 

TurboControl provides this hands-off management of jobs allowing the user to spend more time in data analysis, experimental work, or to be able to produce data at a significantly higher rate compared to the manual setup and monitoring of jobs. TurboControl also contains a single job initiation script entitled TurboGo to allow for the use of the input files without the prior experience with turbomole.

This section will describe the development, features and usage of the TurboControl code in more detail. 

%----------------------------------------------------------------------
\section{Development}
%----------------------------------------------------------------------

TurboControl began as a script for the simple setup and submission of jobs in TurboMole from Gaussian input files. The jobs were submitted to the `wooki' computing cluster managed by the Woo lab, available at the University of Ottawa. This computing cluster consists of approximately 1000 CPU cores, running the CentOS distribution of Linux available in the Rocks software distribution. The GridEngine queuing system ensures fair usage of computing cores for each user, and maximizes throughput by managing computational jobs. 

TurboControl initially submitted jobs and monitored their successful completion or failure. Development quickly expanded to include automatic resubmission for frequency analysis of geometry optimization jobs, required to determine the success of finding an energy minima (stationary point) instead of a transition state. TurboMole contains multiple ways of determining the ground state frequency of a geometry optimized molecule, TurboControl is granular enough to utilize whichever method is requested, or will default to a particular method if none is requested explicitly. While some methods are parallel calculations in TurboMole, others are able to utilize only a single processor core. Resubmitting jobs to the cluster's queue after each step ensures computational resources are not wasted, they are able to be shared appropriately by the queue.

As the complexity of the mechanistic study (see \autoref{chap.mech}) increased to include analysis of thermodynamic data, calculation of transition states, calculation in solution phases, and more, the capabilities of TurboControl were developed to meet these increased demands. 

TurboControl is now able to handle large batches of input, with jobs of varying complexity and monitor them through successful completion or failure of the TurboMole calculation. Analysis of the computational jobs is performed to simply highlight \gls{ac.dft} energies, first computed normal mode frequencies, and thermodynamic properties (if requested).  

Development of TurboControl contained extensive testing at every step. Each function was tested as extensively as possible, including edge cases, error cases, and null inputs. This testing minimizes runtime errors, reducing the frequency of crashes of the code. Some code was unable to be subjected to programmed testing, the code interacting with the TurboMole scripts directly has been tested manually by developing test use cases. Test coverage can be seen in \autoref{app.readme}, \nameref{sec.code}.

Code was written to be `object oriented', that is, the code treats every molecule and job as an object, with defined properties, functions, and methods to manipulate these objects. This is a well defined coding style utilized when dealing with many items of similar type that contain data, when that object can be manipulated, activated, or modified. The data in the object is not modified directly, changes to the data is accessed via methods that are properties of the object.

The code was written to be compliant with popular best practices, particularly those designed for the Python language and described in `PEP8'\autocite{pep8}. Deviations from the style guide were minimized and permitted only in special cases. Proper in code documentation was included as well, using both docstrings and inline comments\autocite{pep257}. This ensures code readability and simplifies future development by any author. The entire project is approximately 5500 lines of code, including tests, helper scripts, licence, and readme files. 

%----------------------------------------------------------------------
\section{Usage}
%----------------------------------------------------------------------

TurboControl is available freely on the internet, and is a fully open-source project\autocite{bulsink2014}. The code may be downloaded by anyone and be installed and used without prior permission for personal, academic, or commercial purposes, provided that the original software license remains with the code. TurboControl works only with the stated versions of software in the `readme' file available with the code on the internet (and included in \autoref{app.readme}). The software requires no installation prior to use, and has very few dependencies beyond the typically installed packages on a Unix or Linux system. 

TurboControl and TurboGo are not quantum mechanical packages themselves, they require a properly licensed installation of TurboMole to perform calculations. Additionally, while GaussView may be used to prepare the input files, modification of the files by hand in a text editor is required to access most features, GaussView is not required for the use of TurboControl. 

%----------------------------------------------------------------------
\section{Conclusions}
%----------------------------------------------------------------------

TurboControl and TurboGo are two scripts developed to maximize throughput and minimize operator involvement in large computational studies utilizing TurboMole. Development of these scripts is not limited to the scope of the thesis, an open source licence and source code freely available on the internet mean this project may be adopted and further developed by others who are interested in its use. The scripts are not quantum chemical packages themselves, a fully licensed copy of the TurboMole software is required for their usage.


